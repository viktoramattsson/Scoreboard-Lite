(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[711],{3117:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/playRounds",function(){return r(3303)}])},6670:function(e,t,r){"use strict";let l=new(r(6285)).ZP("GameDatabase");l.version(1).stores({games:"++id, title, playerNames, scores, currentRound, gameMode"}),t.Z=l},3303:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var l=r(5893),a=r(7294),s=r(1163),o=r(8773),n=function(e){let{onSubmit:t}=e,[r,s]=(0,a.useState)(["",""]),[n,i]=(0,a.useState)(null),d=(e,t)=>{s(r=>{let l=[...r];return l[e]=t,l})},c=e=>{i(e)};return(0,l.jsxs)("div",{className:"flex flex-col justify-between min-h-screen p-6 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900",children:[(0,l.jsxs)("div",{className:"relative w-full max-w-md p-4 pt-10 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500 border border-purple-900 rounded-xl shadow-2xl mt-10",children:[(0,l.jsx)("div",{className:"absolute -top-4 left-4 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 px-3 py-1 rounded-full shadow-lg",children:(0,l.jsx)("h1",{className:"text-center text-white font-bold",children:"Players"})}),r.map((e,t)=>(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("input",{className:"w-full p-2 rounded-lg bg-white text-black focus:outline-none focus:ring-4 focus:ring-pink-500 shadow-lg transition-all duration-300 ease-in-out",type:"text",placeholder:"Enter Player Name",value:e,onChange:e=>d(t,e.target.value)})},t)),(0,l.jsx)("div",{className:"flex justify-center mt-2",children:(0,l.jsx)(o.wEH,{className:"text-3xl text-pink-500 cursor-pointer transition-colors duration-300",onClick:()=>{s(e=>[...e,""])}})})]}),(0,l.jsxs)("div",{className:"relative w-full max-w-md p-4 pt-10 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500 border border-purple-900 rounded-xl shadow-2xl mt-10",children:[(0,l.jsx)("div",{className:"absolute -top-4 left-4 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 px-3 py-1 rounded-full shadow-lg",children:(0,l.jsx)("h2",{className:"text-white font-bold",children:"Game mode"})}),(0,l.jsxs)("div",{className:"flex flex-col mt-2",children:[(0,l.jsx)("button",{className:"p-2 mb-2 rounded-lg shadow-lg transition-transform duration-300 ".concat("highest"===n?"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white":"bg-white text-black"),onClick:()=>c("highest"),children:"Highest Score Wins"}),(0,l.jsx)("button",{className:"p-2 mb-2 rounded-lg shadow-lg transition-transform duration-300 ".concat("lowest"===n?"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white":"bg-white text-black"),onClick:()=>c("lowest"),children:"Lowest Score Wins"}),(0,l.jsx)("button",{className:"p-2 rounded-lg shadow-lg transition-transform duration-300 ".concat("firstTo"===n?"bg-gradient-to-r from-purple-400 via-purple-500 to-purple-600 text-white":"bg-white text-black"),onClick:()=>c("firstTo"),children:"First to reach X"})]})]}),(0,l.jsx)("button",{className:"p-2 bg-gradient-to-r from-green-500 via-green-600 to-green-700 text-white rounded-lg h-16 w-2/3 max-w-sm shadow-2xl transition-transform duration-300 mt-10 mb-4 self-center",onClick:()=>{let e=r.filter(e=>""!==e.trim());e.length>0&&n&&(localStorage.setItem("playerNames",JSON.stringify(e)),localStorage.setItem("gameMode",n),console.log("Saved player names to localStorage:",e),t(e,n),s(["",""]))},children:"Start!"})]})},i=function(e){let{text:t,onClick:r}=e;return(0,l.jsx)("button",{onClick:r,children:t})},d=function(e){let{playerNames:t,totalScores:r,onClose:s,gameMode:o}=e,n=t.map((e,t)=>({name:e,score:r[t]}));n.sort((e,t)=>"highest"===o?t.score-e.score:e.score-t.score);let d=[...n].reverse(),[c,u]=(0,a.useState)(0);return(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 bg-opacity-90 p-10 z-50",onClick:()=>{c<d.length&&u(c+1)},children:(0,l.jsxs)("div",{className:"relative w-full max-w-md p-8 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500 border border-purple-900 rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-500",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("div",{className:"absolute -top-4 left-4 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 px-3 py-1 rounded-full shadow-lg",children:(0,l.jsx)("h2",{className:"text-center text-white font-bold",children:"Total Scores"})}),(0,l.jsx)("div",{className:"mb-4 mt-6 text-center",children:0===c?(0,l.jsx)("p",{className:"text-white text-lg",children:"Tap to reveal results"}):(0,l.jsx)("ul",{children:c>0&&d.slice(0,c).reverse().map((e,r)=>(0,l.jsxs)("li",{className:"mb-2 p-2 bg-gradient-to-r from-white to-gray-300 rounded-lg text-black shadow-lg transform hover:scale-105 transition-transform duration-300",children:[(0,l.jsxs)("span",{className:"font-bold text-lg",children:[t.length-(c-1-r),"."]})," ",e.name,": ",e.score]},r))})}),(0,l.jsx)(i,{text:"Close",onClick:s,className:"mt-2"})]})})},c=r(6670),u=function(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)([]),[i,u]=(0,a.useState)(1),[m,g]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!1),[p,b]=(0,a.useState)(""),[f,N]=(0,a.useState)(null),[j,w]=(0,a.useState)(!1),v=(0,s.useRouter)();(0,a.useEffect)(()=>{{let e=localStorage.getItem("playerNames"),r=localStorage.getItem("scores"),l=localStorage.getItem("currentRound"),a=localStorage.getItem("gameMode");if(e){let r=JSON.parse(e);r.length>0&&(t(r),o(r.map(()=>[])))}r&&o(JSON.parse(r)),l&&u(JSON.parse(l)),a&&N(a),w(!0)}},[]),(0,a.useEffect)(()=>{j&&localStorage.setItem("scores",JSON.stringify(r))},[r,j]),(0,a.useEffect)(()=>{j&&localStorage.setItem("currentRound",JSON.stringify(i))},[i,j]);let S=(e,t)=>{o(r=>{let l=[...r];return l[e][i-1]=t,l})},y=()=>e.every((e,t)=>r[t]&&r[t][i-1]),k=async()=>{await c.Z.games.add({title:p,playerNames:e,scores:r,currentRound:i,gameMode:f}),x(!1)},C=e=>{let t=e.charCode;(t<48||t>57)&&e.preventDefault()};if(!j)return null;let I=r.map(e=>e.reduce((e,t)=>e+(parseInt(t)||0),0));return e.length>0?(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex space-x-10",children:[(0,l.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg",onClick:()=>{i>1&&u(e=>e-1)},disabled:1===i,children:"Previous"}),(0,l.jsxs)("h1",{children:["Round ",i]}),(0,l.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg",onClick:()=>{y()&&u(e=>e+1)},disabled:!y(),children:"Next"})]}),(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Player Name"}),(0,l.jsx)("th",{children:"Score"})]})}),(0,l.jsx)("tbody",{children:e.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Enter Score",value:r[t]&&r[t][i-1]?r[t][i-1]:"",onChange:e=>S(t,e.target.value),onKeyPress:C})})]},t))})]}),(0,l.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg mt-4",onClick:()=>{g(!0)},children:"Results"}),m&&(0,l.jsx)(d,{playerNames:e,totalScores:I,onClose:()=>{g(!1)},gameMode:f}),(0,l.jsx)("button",{className:"p-2 bg-green-500 text-white rounded-lg mt-4",onClick:()=>x(!0),children:"Save Game"}),(0,l.jsx)("button",{className:"p-2 bg-red-500 text-white rounded-lg mt-4",onClick:()=>{localStorage.removeItem("playerNames"),localStorage.removeItem("scores"),localStorage.removeItem("currentRound"),localStorage.removeItem("gameMode"),v.push("/")},children:"End game"}),h&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Save Game"}),(0,l.jsx)("input",{type:"text",placeholder:"Game Name",value:p,onChange:e=>b(e.target.value),className:"w-full p-2 mb-4 border rounded-lg"}),(0,l.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg",onClick:k,children:"Save"}),(0,l.jsx)("button",{className:"p-2 bg-gray-500 text-white rounded-lg mt-4",onClick:()=>x(!1),children:"Cancel"})]})})]}):(0,l.jsx)(n,{onSubmit:(e,r)=>{t(e),o(e.map(()=>[])),N(r),localStorage.setItem("playerNames",JSON.stringify(e)),localStorage.setItem("gameMode",r)}})}}},function(e){e.O(0,[365,211,888,774,179],function(){return e(e.s=3117)}),_N_E=e.O()}]);