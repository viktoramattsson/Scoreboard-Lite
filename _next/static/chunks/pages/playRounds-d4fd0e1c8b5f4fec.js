(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[711],{3117:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/playRounds",function(){return l(3303)}])},6670:function(e,t,l){"use strict";let o=new(l(6285)).ZP("GameDatabase");o.version(1).stores({games:"++id, title, playerNames, scores, currentRound, gameMode"}),t.Z=o},3303:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return u}});var o=l(5893),r=l(7294),a=l(1163),s=l(8773),n=function(e){let{onSubmit:t}=e,[l,a]=(0,r.useState)(["",""]),[n,i]=(0,r.useState)(null),c=(e,t)=>{a(l=>{let o=[...l];return o[e]=t,o})},d=e=>{i(e)};return(0,o.jsxs)("div",{className:"flex flex-col justify-between min-h-screen p-6 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900",children:[(0,o.jsxs)("div",{className:"relative w-full max-w-md p-4 pt-10 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500 border border-purple-900 rounded-xl shadow-2xl mt-10",children:[(0,o.jsx)("div",{className:"absolute -top-4 left-4 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 px-3 py-1 rounded-full shadow-lg",children:(0,o.jsx)("h1",{className:"text-center text-white font-bold",children:"Players"})}),l.map((e,t)=>(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("input",{className:"w-full p-2 rounded-lg bg-white text-black focus:outline-none focus:ring-4 focus:ring-pink-500 shadow-lg transition-all duration-300 ease-in-out",type:"text",placeholder:"Enter Player Name",value:e,onChange:e=>c(t,e.target.value)})},t)),(0,o.jsx)("div",{className:"flex justify-center mt-2",children:(0,o.jsx)(s.wEH,{className:"text-3xl text-pink-500 cursor-pointer transition-colors duration-300",onClick:()=>{a(e=>[...e,""])}})})]}),(0,o.jsxs)("div",{className:"relative w-full max-w-md p-4 pt-10 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500 border border-purple-900 rounded-xl shadow-2xl mt-10",children:[(0,o.jsx)("div",{className:"absolute -top-4 left-4 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 px-3 py-1 rounded-full shadow-lg",children:(0,o.jsx)("h2",{className:"text-white font-bold",children:"Game mode"})}),(0,o.jsxs)("div",{className:"flex flex-col mt-2",children:[(0,o.jsx)("button",{className:"p-2 mb-2 rounded-lg shadow-lg transition-transform duration-300 ".concat("highest"===n?"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white":"bg-white text-black"),onClick:()=>d("highest"),children:"Highest Score Wins"}),(0,o.jsx)("button",{className:"p-2 mb-2 rounded-lg shadow-lg transition-transform duration-300 ".concat("lowest"===n?"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white":"bg-white text-black"),onClick:()=>d("lowest"),children:"Lowest Score Wins"}),(0,o.jsx)("button",{className:"p-2 rounded-lg shadow-lg transition-transform duration-300 ".concat("firstTo"===n?"bg-gradient-to-r from-purple-400 via-purple-500 to-purple-600 text-white":"bg-white text-black"),onClick:()=>d("firstTo"),children:"First to reach X"})]})]}),(0,o.jsx)("button",{className:"p-2 bg-gradient-to-r from-green-500 via-green-600 to-green-700 text-white rounded-lg h-16 w-2/3 max-w-sm shadow-2xl transition-transform duration-300 mt-10 mb-4 self-center",onClick:()=>{let e=l.filter(e=>""!==e.trim());e.length>0&&n&&(localStorage.setItem("playerNames",JSON.stringify(e)),localStorage.setItem("gameMode",n),console.log("Saved player names to localStorage:",e),t(e,n),a(["",""]))},children:"Start!"})]})},i=function(e){let{text:t,onClick:l}=e;return(0,o.jsx)("button",{onClick:l,children:t})},c=function(e){let{playerNames:t,totalScores:l,onClose:a,gameMode:s}=e,n=t.map((e,t)=>({name:e,score:l[t]}));n.sort((e,t)=>"highest"===s?t.score-e.score:e.score-t.score);let c=[...n].reverse(),[d,u]=(0,r.useState)(0);return(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 bg-opacity-90 p-10 z-50",onClick:()=>{d<c.length&&u(d+1)},children:(0,o.jsxs)("div",{className:"relative w-full max-w-md p-8 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500 border border-purple-900 rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-500",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("div",{className:"absolute -top-4 left-4 bg-gradient-to-r from-purple-800 via-blue-700 to-indigo-900 px-3 py-1 rounded-full shadow-lg",children:(0,o.jsx)("h2",{className:"text-center text-white font-bold",children:"Total Scores"})}),(0,o.jsx)("div",{className:"mb-4 mt-6 text-center",children:0===d?(0,o.jsx)("p",{className:"text-white text-lg",children:"Tap to reveal results"}):(0,o.jsx)("ul",{children:d>0&&c.slice(0,d).reverse().map((e,l)=>(0,o.jsxs)("li",{className:"mb-2 p-2 bg-gradient-to-r from-white to-gray-300 rounded-lg text-black shadow-lg transform hover:scale-105 transition-transform duration-300",children:[(0,o.jsxs)("span",{className:"font-bold text-lg",children:[t.length-(d-1-l),"."]})," ",e.name,": ",e.score]},l))})}),(0,o.jsx)(i,{text:"Close",onClick:a,className:"mt-2"})]})})},d=l(6670),u=function(){let[e,t]=(0,r.useState)([]),[l,s]=(0,r.useState)([]),[i,u]=(0,r.useState)(1),[m,g]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),[p,b]=(0,r.useState)(""),[f,N]=(0,r.useState)(null),[v,j]=(0,r.useState)(!1),w=(0,a.useRouter)();(0,r.useEffect)(()=>{{let e=localStorage.getItem("playerNames"),l=localStorage.getItem("scores"),o=localStorage.getItem("currentRound"),r=localStorage.getItem("gameMode");if(console.log("Loaded player names from localStorage:",e),console.log("Loaded scores from localStorage:",l),console.log("Loaded current round from localStorage:",o),console.log("Loaded game mode from localStorage:",r),e){let l=JSON.parse(e);console.log("Parsed player names:",l),l.length>0&&(t(l),s(l.map(()=>[])))}l&&s(JSON.parse(l)),o&&u(JSON.parse(o)),r&&N(r),j(!0)}},[]),(0,r.useEffect)(()=>{v&&(localStorage.setItem("scores",JSON.stringify(l)),console.log("Saved scores to localStorage:",l))},[l,v]),(0,r.useEffect)(()=>{v&&(localStorage.setItem("currentRound",JSON.stringify(i)),console.log("Saved current round to localStorage:",i))},[i,v]);let S=(e,t)=>{s(l=>{let o=[...l];return o[e][i-1]=t,o})},y=()=>e.every((e,t)=>l[t]&&l[t][i-1]),k=async()=>{await d.Z.games.add({title:p,playerNames:e,scores:l,currentRound:i,gameMode:f}),x(!1)};if(!v)return null;let C=l.map(e=>e.reduce((e,t)=>e+(parseInt(t)||0),0));return e.length>0?(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"flex space-x-10",children:[(0,o.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg",onClick:()=>{i>1&&u(e=>e-1)},disabled:1===i,children:"Previous"}),(0,o.jsxs)("h1",{children:["Round ",i]}),(0,o.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg",onClick:()=>{y()&&u(e=>e+1)},disabled:!y(),children:"Next"})]}),(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Player Name"}),(0,o.jsx)("th",{children:"Score"})]})}),(0,o.jsx)("tbody",{children:e.map((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{type:"text",placeholder:"Enter Score",value:l[t]&&l[t][i-1]?l[t][i-1]:"",onChange:e=>S(t,e.target.value)})})]},t))})]}),(0,o.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg mt-4",onClick:()=>{g(!0)},children:"Results"}),m&&(0,o.jsx)(c,{playerNames:e,totalScores:C,onClose:()=>{g(!1)},gameMode:f}),(0,o.jsx)("button",{className:"p-2 bg-green-500 text-white rounded-lg mt-4",onClick:()=>x(!0),children:"Save Game"}),(0,o.jsx)("button",{className:"p-2 bg-red-500 text-white rounded-lg mt-4",onClick:()=>{localStorage.removeItem("playerNames"),localStorage.removeItem("scores"),localStorage.removeItem("currentRound"),localStorage.removeItem("gameMode"),w.push("/")},children:"End game"}),h&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,o.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Save Game"}),(0,o.jsx)("input",{type:"text",placeholder:"Game Name",value:p,onChange:e=>b(e.target.value),className:"w-full p-2 mb-4 border rounded-lg"}),(0,o.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-lg",onClick:k,children:"Save"}),(0,o.jsx)("button",{className:"p-2 bg-gray-500 text-white rounded-lg mt-4",onClick:()=>x(!1),children:"Cancel"})]})})]}):(0,o.jsx)(n,{onSubmit:(e,l)=>{t(e),s(e.map(()=>[])),N(l),localStorage.setItem("playerNames",JSON.stringify(e)),localStorage.setItem("gameMode",l),console.log("Saved player names to localStorage:",e),console.log("Saved game mode to localStorage:",l)}})}}},function(e){e.O(0,[365,211,888,774,179],function(){return e(e.s=3117)}),_N_E=e.O()}]);